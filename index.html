<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>مهارت‌های من</title> <!-- Updated Title -->
<link href="/mimg/fav.png" rel="icon" type="image/png"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;700&display=swap" rel="stylesheet"/>
<!-- AI Game Scripts -->
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>

<style>
        /* --- START OF CSS --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary-color: #333;
            --secondary-color: #121212;
            --accent-color: #FFBF00; /* Yellow */
            --mustard-color: #D4A017; /* Mustard shade */
            --text-color: #f5f5f5;
            --text-dark: #212121; /* Dark text for light backgrounds */
            --card-white: #ffffff;
            --hamburger-color: var(--text-color);
            --overlay-bg: rgba(0, 0, 0, 0.65);
            --accent-color-rgb: 255, 191, 0;
            --shadow-color: rgba(0, 0, 0, 0.15); /* Adjusted shadow */
        }
            
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: var(--primary-color);
            color: var(--text-color);
            overflow-x: hidden;
            font-size: 16px;
        }
        .page-wrapper {
            position: relative;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* --- Navbar, Sidemenu, Overlay Styles (REMOVED) --- */

        /* --- Content Container Full Width --- */
        .content-container {
            padding: 0;
            min-height: 100vh;
            z-index: 1;
            width: 100%; /* Take full width */
            box-sizing: border-box;
            position: relative;
        }
        
        /* Loader Styles (Unchanged) */
        .loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #000; display: flex; justify-content: center; align-items: center; z-index: 1000; transition: opacity 0.4s ease, visibility 0s 0.4s linear; visibility: visible; opacity: 1; }
        .loader.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        .loader-content { display: flex; flex-direction: column; align-items: center; }
        .loader-spinner { width: 50px; height: 50px; border: 5px solid rgba(255, 255, 255, 0.1); border-radius: 50%; border-top-color: var(--accent-color); animation: spin 1s linear infinite; margin-bottom: 20px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* General Section Styling */
        .section {
            min-height: 100vh;
            position: relative;
            overflow: hidden;
            padding: 80px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
             background-color: var(--section-bg, var(--primary-color));
        }
         #hero { --section-bg: #1a1a2e; }
         #about { --section-bg: #1a1a1a; }
         #skills { --section-bg: var(--primary-color); }
         #ai-game-section { --section-bg: #0d1117; }
         #games-section { --section-bg: #121212; }
         #skills-parallax { --section-bg: #0d1117; }
         #projects { --section-bg: #0d0d0d; }
         #contact { --section-bg: #0a0a0a; }

        @media (min-width: 769px) {
            #skills.section {
                 min-height: auto;
                 height: 100vh;
                 align-items: flex-start;
                 padding-top: 150px;
            }
        }

        .container { width: 90%; max-width: 1200px; margin: 0 auto; position: relative; z-index: 2; }
        h1, h2, h3 { line-height: 1.3; }
        p { line-height: 1.7; font-size: 1rem; }

        #hero { text-align: center; }
        .hero-content { position: relative; z-index: 2; }
        .hero-title { font-size: 4rem; margin-bottom: 20px; opacity: 0; transform: translateY(30px); transition: opacity 1s ease, transform 1s ease; }
        .hero-subtitle { font-size: 1.3rem; margin-bottom: 30px; opacity: 0; transform: translateY(30px); transition: opacity 1s ease 0.2s, transform 1s ease 0.2s; }
        .hero-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; background-color: transparent; }
        .floating-shapes { position: absolute; width: 100%; height: 100%; top: 0; left: 0; overflow: hidden; z-index: 1; pointer-events: none; }
        .shape { position: absolute; background-color: rgba(255, 255, 255, 0.08); border-radius: 50%; animation: float 15s infinite linear alternate; bottom: -80px; }
        @keyframes float { 0% { transform: translateY(0) rotate(0deg); opacity: 0.1; } 50% { opacity: 0.5; } 100% { transform: translateY(-120vh) rotate(180deg); opacity: 0.1; } }

        .about-grid { display: grid; grid-template-columns: 1fr; gap: 40px; align-items: center; }
        .about-text { opacity: 0; transform: translateY(50px); transition: all 0.8s ease; text-align: center; }
        .about-image-container { display: flex; justify-content: center; align-items: center; }
        .about-image { position: relative; width: 80%; max-width: 350px; aspect-ratio: 1 / 1; opacity: 0; transform: translateY(50px); transition: all 0.8s ease; }
        .about-image-inner { position: absolute; width: 100%; height: 100%; background-color: var(--accent-color); border-radius: 15px; transform-origin: center; transition: all 1s ease; background-image: url('https://github.com/Mo3Beh/mimg/blob/main/1.png?raw=true'); background-size: cover; background-position: center; }
        .about-title { font-size: 2.2rem; margin-bottom: 20px; color: var(--accent-color); }

        #skills.section {
            background: linear-gradient(135deg, var(--accent-color) 0%, var(--mustard-color) 100%);
             --section-bg: transparent;
             color: var(--text-dark);
        }
        .skills-container { position: relative; padding: 0; width: 100%; }
        .skills-title { font-size: 2.2rem; margin-bottom: 40px; text-align: center; opacity: 0; transform: translateY(30px); transition: all 0.8s ease; color: var(--text-dark); }
        .horizontal-scroll-container { width: 100%; overflow-x: hidden; -webkit-overflow-scrolling: touch; padding: 20px 0; cursor: grab; }
        .horizontal-scroll-container:active { cursor: grabbing; }
        .horizontal-scroll { display: flex; gap: 25px; width: max-content; padding: 0 15px; position: relative; }
        .skill-card { width: 280px; background-color: var(--card-white); border-radius: 15px; padding: 25px; display: flex; flex-direction: column; justify-content: flex-start; position: relative; overflow: hidden; backdrop-filter: none; border: none; box-shadow: 0 8px 25px var(--shadow-color); opacity: 0; transform: translateY(50px); transition: opacity 0.5s ease, transform 0.5s ease, box-shadow 0.3s ease; text-align: center; flex-shrink: 0; color: var(--text-dark); }
        .skill-card:hover { transform: translateY(-8px) scale(1.03); box-shadow: 0 12px 35px rgba(0, 0, 0, 0.2); }
        .skill-image { width: 70px; height: 70px; border-radius: 10px; display: block; margin: 0 auto 20px auto; object-fit: contain; filter: none; transition: transform 0.3s ease; }
        .skill-card:hover .skill-image { transform: scale(1.1); }
        .skill-content { flex-grow: 1; display: flex; flex-direction: column; }
        .skill-title { font-size: 1.2rem; margin-bottom: 10px; font-weight: bold; color: var(--text-dark); }
        .skill-card p { font-size: 0.9rem; line-height: 1.5; margin-bottom: auto; padding-bottom: 15px; color: var(--text-dark); opacity: 0.8; }
        .skill-bar { width: 100%; height: 6px; background-color: rgba(0, 0, 0, 0.1); border-radius: 3px; margin-top: auto; overflow: hidden; }
        .skill-progress { height: 100%; background-color: var(--mustard-color); width: 0; transition: width 1.5s ease 0.3s; border-radius: 3px; }

        .skills-parallax { min-height: 100vh; padding: 100px 0; background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.8)), url('https://images.unsplash.com/photo-1518770660439-4636190af475?q=70&fm=webp&w=1000') center/cover; background-attachment: scroll; position: relative; display: flex; flex-direction: column; align-items: center; gap: 30px; overflow: visible; }
        .skills-parallax.B { background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.8)), url('https://images.pexels.com/photos/1752757/pexels-photo-1752757.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1') center/cover; background-attachment: scroll; }
        .parallax-content-wrapper { width: 90%; max-width: 1200px; margin: 0 auto; display: flex; flex-direction: column; align-items: center; gap: 30px; position: relative; z-index: 2; }
        .skill-item, .programming-card { padding: 25px; background: rgba(255, 255, 255, 0.08); backdrop-filter: blur(10px); border-radius: 15px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2); opacity: 0; transform: translateY(50px); transition: opacity 0.8s ease, transform 0.8s ease; width: 90%; max-width: 350px; text-align: center; position: relative; left: auto; top: auto; z-index: 1; }
        .skill-item { display: flex; align-items: center; gap: 15px; }
        .skill-item-content { text-align: right; flex-grow: 1; }
        .skill-item img.skill-image { width: 50px; height: 50px; margin: 0; flex-shrink: 0; filter: none; }
        .skill-item h3 { color: var(--accent-color); font-size: 1.5rem; margin: 0 0 8px 0; }
        .skill-item p { font-size: 0.95rem; line-height: 1.6; margin: 0; }
        .programming-card { margin-top: 20px; border: 1px solid var(--accent-color); }
        .programming-card h3 { color: var(--accent-color); font-size: 1.6rem; margin-bottom: 10px; }
        .programming-card p { font-size: 1rem; line-height: 1.6; }
        
        #projects { padding: 80px 15px; }
        .projects-title { font-size: 2.2rem; margin-bottom: 40px; text-align: center; opacity: 0; transform: translateY(30px); transition: all 0.8s ease; color: var(--accent-color); }
        .projects-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; margin-top: 2rem; }
        .project-card { position: relative; height: 280px; border-radius: 15px; overflow: hidden; opacity: 0; transform: translateY(50px); transition: all 0.5s ease; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); background-color: #222; }
        .project-card:hover { transform: translateY(-8px) scale(1.02); box-shadow: 0 12px 35px rgba(0, 0, 0, 0.4); }
        .project-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: #333; background-size: cover; background-position: center; transition: transform 0.5s ease, filter 0.5s ease; filter: brightness(0.7); }
        .project-content { position: absolute; bottom: 0; left: 0; width: 100%; padding: 20px; background: linear-gradient(to top, rgba(0, 0, 0, 0.9) 20%, transparent 100%); transform: translateY(50%); opacity: 0; transition: transform 0.5s ease, opacity 0.5s ease; color: #fff; }
        .project-card:hover .project-image { transform: scale(1.05); filter: brightness(0.9); }
        .project-card:hover .project-content { transform: translateY(0); opacity: 1; }
        .project-title { font-size: 1.4rem; margin-bottom: 8px; font-weight: bold; }
        .project-card p { font-size: 0.9rem; line-height: 1.4; }
        
        #contact { padding: 80px 15px; }
        .contact-content { display: flex; flex-direction: column; align-items: center; text-align: center; width: 100%; }
        .contact-title { font-size: 2.2rem; margin-bottom: 40px; opacity: 0; transform: translateY(30px); transition: all 0.8s ease; color: var(--accent-color); }
        
        .id-card { background: linear-gradient(135deg, var(--mustard-color) 0%, var(--accent-color) 100%); color: var(--text-dark); border-radius: 15px; padding: 30px 40px; width: 90%; max-width: 550px; margin: 20px auto 0 auto; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25); opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease 0.4s, transform 0.8s ease 0.4s; }
        .id-card-title { font-size: 1.6rem; font-weight: bold; margin-bottom: 30px; text-align: center; color: var(--text-dark); }
        .social-links { display: flex; flex-direction: column; gap: 18px; align-items: stretch; }
        .social-link { display: flex; align-items: center; gap: 15px; padding: 12px 20px; background-color: rgba(255, 255, 255, 0.2); border-radius: 10px; text-decoration: none; color: var(--text-dark); transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .social-link:hover { background-color: rgba(255, 255, 255, 0.35); transform: translateY(-3px) scale(1.02); box-shadow: 0 5px 10px rgba(0,0,0,0.15); }
        .social-icon { width: 30px; height: 30px; flex-shrink: 0; filter: brightness(0.1); }
        .social-username { font-size: 1.1rem; font-weight: 500; flex-grow: 1; text-align: right; }

        /* --- START: AI Game Section Styles --- */
        #ai-game-section .container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #ai-game-title {
            color: var(--accent-color);
            font-size: 2.2rem;
            margin-bottom: 40px;
            min-height: 50px;
        }
        .ai-game-wrapper {
            display: flex;
            width: 100%;
            gap: 25px;
        }
        .ai-game-main {
            flex: 2;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .camera-container {
            position: relative;
            border: 2px solid var(--accent-color);
            border-radius: 15px;
            overflow: hidden;
            background: #000;
            box-shadow: 0 8px 32px rgba(var(--accent-color-rgb), 0.2);
            min-height: 380px; /* MODIFIED: Reduced height */
            width: 100%;
        }
        #videoElement {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* MODIFIED: Un-mirror the video feed */
            transform: scaleX(-1);
        }
        #canvasElement {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* MODIFIED: Un-mirror the canvas drawing to match the video */
            transform: scaleX(-1);
        }
        .detection-overlay {
            position: absolute; bottom: 10px; left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: var(--accent-color);
            padding: 8px 15px; border-radius: 20px;
            font-size: 0.9rem; font-weight: bold;
            border: 1px solid var(--accent-color);
            backdrop-filter: blur(5px);
        }
        .computer-player {
            position: absolute; top: 10px; right: 10px;
            width: 130px; height: 130px;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid var(--accent-color);
            border-radius: 15px; display: flex;
            flex-direction: column; align-items: center; justify-content: center;
            color: var(--accent-color); backdrop-filter: blur(5px);
        }
        .computer-player .computer-label { font-size: 0.8rem; margin-bottom: 8px; }
        .computer-player .computer-move { font-size: 2.5rem; margin-bottom: 5px; }
        .computer-player .computer-text { font-size: 0.8rem; text-align: center; }
        .countdown-overlay {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem; color: var(--accent-color);
            text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
        }
        .ai-game-controls {
            display: flex; gap: 15px; justify-content: center;
        }
        .ai-game-btn {
            padding: 12px 25px; font-size: 1rem;
            border-radius: 10px; cursor: pointer;
            transition: all 0.3s ease; font-weight: bold;
            font-family: 'Vazirmatn', sans-serif;
            border: 2px solid var(--accent-color);
        }
        .btn-start { background: var(--accent-color); color: var(--text-dark); }
        .btn-start:hover:not(:disabled) { background: var(--mustard-color); transform: translateY(-2px); }
        .btn-start:disabled { background: #555; border-color: #555; color: #999; cursor: not-allowed; }
        .btn-reset { background: transparent; color: var(--accent-color); }
        .btn-reset:hover { background: rgba(var(--accent-color-rgb), 0.1); transform: translateY(-2px); }
        
        .ai-game-sidebar {
            flex: 1; display: flex; flex-direction: column;
            gap: 20px; min-width: 280px;
        }
        .ai-game-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px; padding: 20px;
            backdrop-filter: blur(10px);
        }
        .ai-game-card .title {
            color: var(--accent-color); font-size: 1.5rem;
            text-align: center; margin-bottom: 20px;
        }
        .score-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .score-item { text-align: center; padding: 15px; background: rgba(0, 0, 0, 0.2); border-radius: 10px; }
        .score-label { color: var(--accent-color); font-size: 0.9rem; margin-bottom: 8px; }
        .score-value { font-size: 2rem; font-weight: bold; color: var(--text-color); }
        
        #result-section { flex: 1; display: flex; flex-direction: column; justify-content: center; }
        #result-content .result-text { font-size: 1.2rem; margin-bottom: 15px; text-align: center;}
        #result-content .battle-display { display: flex; justify-content: space-around; align-items: center; margin: 20px 0; }
        .player-display { text-align: center; }
        .player-label { font-size: 1rem; color: var(--accent-color); margin-bottom: 10px; }
        .player-move { font-size: 3rem; margin-bottom: 5px; }
        .vs-text { font-size: 2rem; color: var(--accent-color); font-weight: bold; }
        #statusText { color: var(--accent-color); text-align: center; font-size: 0.9rem; margin-top: 15px; min-height: 40px; line-height: 1.5; } /* MODIFIED: Increased height */
        .win { color: #28a745; }
        .loss { color: #dc3545; }
        .tie { color: var(--accent-color); }
        /* --- END: AI Game Section Styles --- */


        #games-section { min-height: 100vh; padding: 80px 15px 40px 15px; box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.05); display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: white; position: relative; overflow: hidden; }
        .game-container { position: relative; z-index: 1; width: 100%; max-width: 800px; margin: 0 auto; display: flex; flex-direction: column; align-items: center; }
        .game-title { font-size: 2rem; margin-bottom: 30px; color: white; font-weight: bold; }
        .letter-boxes { display: flex; justify-content: center; gap: 10px; margin-bottom: 30px; width: 100%; flex-wrap: wrap; }
        .letter-box { width: 60px; height: 60px; border: 2px solid var(--accent-color); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: bold; background-color: rgba(255, 255, 255, 0.05); color: white; transition: all 0.3s; backdrop-filter: blur(5px); flex-shrink: 0; }
        .letter-box.correct { background-color: rgba(var(--accent-color-rgb), 0.7); border-color: rgba(var(--accent-color-rgb), 0.9); color: #121212; animation: pulse 0.5s ease-out; }
        .game-message { margin: 20px 0; font-size: 1.1rem; color: white; min-height: 25px; transition: opacity 0.3s; opacity: 1; }
        .game-message:empty { opacity: 0; }
        .win-message { color: var(--accent-color); font-weight: bold; font-size: 1.3rem; margin-top: 15px; display: none; }
        .used-letters { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; margin-top: 25px; max-width: 90%; min-height: 30px; }
        .used-letter { width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; font-size: 1rem; background-color: rgba(255, 255, 255, 0.1); border-radius: 6px; color: rgba(255, 255, 255, 0.7); backdrop-filter: blur(5px); }
        .hint-button { position: relative; width: 40px; height: 40px; background-color: rgba(var(--accent-color-rgb), 0.1); border: 2px solid var(--accent-color); border-radius: 8px; display: flex; justify-content: center; align-items: center; color: var(--accent-color); font-size: 1.5rem; cursor: pointer; transition: background-color 0.3s; margin-top: 25px; }
        .hint-button:hover { background-color: rgba(var(--accent-color-rgb), 0.2); }
        .hint-tooltip { visibility: hidden; opacity: 0; width: 220px; background-color: rgba(18, 18, 18, 0.95); color: white; text-align: center; border-radius: 6px; padding: 12px; position: absolute; z-index: 10; bottom: 125%; left: 50%; transform: translateX(-50%); transition: opacity 0.3s, visibility 0s 0.3s linear; pointer-events: none; font-size: 0.9rem; line-height: 1.5; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .hint-tooltip strong { display: block; font-weight: bold; margin-bottom: 8px; color: var(--accent-color); font-size: 1rem; }
        .hint-button:hover .hint-tooltip { visibility: visible; opacity: 1; transition: opacity 0.3s; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        
        .virtual-keyboard { display: flex; flex-wrap: wrap; justify-content: center; gap: 5px; margin-top: 30px; padding: 10px; max-width: 100%; background-color: rgba(0,0,0,0.2); border-radius: 8px; transform: scale(0.85); }
        .keyboard-row { display: flex; justify-content: center; width: 100%; margin-bottom: 5px; gap: 5px; }
        .key { padding: 10px 0; width: 28px; height: 45px; font-size: 1.2rem; font-family: 'Vazirmatn', sans-serif; background-color: rgba(255, 255, 255, 0.1); color: var(--text-color); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 5px; cursor: pointer; transition: background-color 0.2s, transform 0.1s; display: flex; justify-content: center; align-items: center; flex-shrink: 0; user-select: none; -webkit-tap-highlight-color: transparent; }
        .key:active { background-color: rgba(var(--accent-color-rgb), 0.3); transform: scale(0.95); }
        @media (min-width: 769px) { .virtual-keyboard { display: none; } }
        
        .call-section { width: 100%; max-width: 1000px; background-color: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 20px; transform: scaleY(0) translateY(20px); transform-origin: top; opacity: 0; transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.5s ease-in-out; backdrop-filter: blur(10px); display: flex; flex-direction: column; gap: 20px; margin-top: 30px; position: relative; z-index: 5; border: 1px solid rgba(255, 255, 255, 0.1); }
        .call-section.active { transform: scaleY(1) translateY(0); opacity: 1; }
        .call-block { width: 100%; background-color: rgba(255, 255, 255, 0.05); border: 1px solid rgba(var(--accent-color-rgb), 0.3); border-radius: 12px; padding: 20px; text-align: center; transition: all 0.3s ease; display: flex; flex-direction: column; align-items: center; }
        .call-block:hover { background-color: rgba(var(--accent-color-rgb), 0.1); transform: scale(1.03); border-color: rgba(var(--accent-color-rgb), 0.5); }
        .call-block img { width: 60px; height: 60px; margin-bottom: 15px; object-fit: contain; border-radius: 50%; background-color: rgba(var(--accent-color-rgb), 0.15); padding: 5px; }
        .call-block h3 { margin: 0 0 8px 0; color: var(--accent-color); font-size: 1.2rem; }
        .call-block p { color: rgba(255, 255, 255, 0.9); font-size: 0.95rem; line-height: 1.6; }

        /* --- START: Experience Section Styles --- */
        #experience {
            background-color:#1a1a1a;
        }
        .experience-network {
          display: flex;
          flex-direction: column;
          gap: 50px;
          color: #f5f5f5;
          font-size: 1.05rem;
          max-width: 900px;
          margin: auto;
        }
        .experience-group h3 {
          color: var(--accent-color);
          margin-bottom: 20px;
          font-size: 1.4rem;
        }
        .experience-items {
          display: flex;
          flex-direction: column;
          gap: 25px;
          padding-right: 10px;
        }
        .exp-item {
          display: flex;
          align-items: center;
          gap: 20px;
          padding: 15px 20px;
          background-color: rgba(255, 255, 255, 0.03);
          border: 1px solid rgba(255, 255, 255, 0.05);
          border-radius: 12px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
          transition: all 0.3s ease;
        }
        .exp-item:hover {
          background-color: rgba(255, 255, 255, 0.05);
          transform: translateY(-3px);
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
        }
        .exp-icon-wrapper {
          min-width: 60px;
          min-height: 60px;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .exp-logo {
          width: 60px;
          height: 60px;
          object-fit: contain;
          border-radius: 10px;
          background-color: rgba(255, 255, 255, 0.05);
          padding: 6px;
        }
        /* Style for highlighted text */
        .highlight-yellow {
            color: var(--accent-color);
            font-size: 0.85em;
            font-weight: 300;
            display: inline-block;
            margin-top: 5px;
        }
        /* --- END: Experience Section Styles --- */

        /* --- Media Queries --- */

        @media (max-width: 1024px) {
            .ai-game-wrapper {
                flex-direction: column;
            }
            .ai-game-sidebar {
                min-width: auto;
            }
        }

        @media (max-width: 768px) {
            .project-content {
                transform: translateY(0) !important;
                opacity: 1 !important;
                background: linear-gradient(to top, rgba(0, 0, 0, 0.95) 40%, transparent 100%);
            }
            .project-card:hover .project-image {
                 transform: none;
                 filter: brightness(0.7);
            }
             .id-card { padding: 25px; max-width: 95%; }
             .id-card-title { font-size: 1.4rem; margin-bottom: 25px; }
             .social-links { gap: 15px; }
             .social-link { padding: 10px 15px; }
             .social-icon { width: 28px; height: 28px; }
             .social-username { font-size: 1rem; }
             .hero-title { font-size: 3rem; }
             .camera-container { min-height: 280px; } /* MODIFIED: Reduced height for mobile */
             .computer-player { width: 100px; height: 100px; }
             .computer-move { font-size: 2rem; }
             #ai-game-title { font-size: 1.8rem; }
        }
        
        @media (min-width: 600px) {
            .letter-box { width: 70px; height: 70px; font-size: 2.5rem; }
            .used-letter { width: 40px; height: 40px; font-size: 1.1rem; }
            .call-section { padding: 30px; flex-direction: row; flex-wrap: wrap; justify-content: center; }
            .call-block { width: calc(50% - 15px); }
            .key { width: 40px; height: 50px; font-size: 1.3rem; }
        }

        @media (min-width: 769px) {
             body { font-size: 17px; }
             .section { padding: 100px 0; }
             #skills.section { padding: 150px 0 100px 0; align-items: flex-start; }
            .hero-title { font-size: 5rem; }
            .hero-subtitle { font-size: 1.5rem; }
            .about-grid { grid-template-columns: repeat(2, 1fr); gap: 50px; }
            .about-text { text-align: right; transform: translateX(50px); }
            .about-image-container { justify-content: flex-start; }
            .about-image { width: 100%; max-width: 400px; transform: translateX(-50px); }
            .skills-title, .projects-title, .contact-title, #ai-game-title { font-size: 2.5rem; margin-bottom: 50px; }
             #contact .contact-title { margin-bottom: 40px; }
            .skills-parallax { background-attachment: fixed; min-height: 180vh; padding: 0; display: block; gap: 0; }
            .skills-parallax.B { background-attachment: fixed; }
            .parallax-content-wrapper { position: static; display: block; width: 100%; max-width: none; gap: 0; }
            .skill-item, .programming-card { position: absolute; width: 300px; max-width: 300px; text-align: right; z-index: 5; opacity: 0; transform: translateY(100px); margin: 0; display: block; align-items: initial; gap: 0; }
            .skill-item img.skill-image { width: 100px; height: 100px; display: block; margin: 0 auto 10px; flex-shrink: initial; }
            .skill-item-content { text-align: right; }
            .skill-1 { left: 20%; top: 15%; } .skill-2 { left: 60%; top: 30%; } .skill-3 { left: 30%; top: 55%; }
            .programming-card { left: 65%; top: 75%; z-index: 10; }
            .skill-card { width: 320px; } .skill-image { width: 80px; height: 80px; } .skill-card p { font-size: 1rem; } .skill-title { font-size: 1.3rem; }
            #projects { padding: 100px 30px; } .project-card { height: 300px; } .project-title { font-size: 1.5rem; }
            #contact { padding: 100px 30px; }
            .id-card { padding: 40px 50px; max-width: 600px; }
            .id-card-title { font-size: 1.8rem; }
            .social-icon { width: 35px; height: 35px; }
            .social-username { font-size: 1.2rem; }
            .game-title { font-size: 2.5rem; } .letter-box { width: 90px; height: 90px; font-size: 3.5rem; gap: 15px; } .used-letter { width: 50px; height: 50px; font-size: 1.5rem; } .hint-button { width: 50px; height: 50px; font-size: 1.8rem; } .hint-tooltip { width: 250px; font-size: 1rem; }
            .call-block { width: calc(33.333% - 20px); } .call-block img { width: 70px; height: 70px; } .call-block h3 { font-size: 1.4rem; } .call-block p { font-size: 1rem; }
        }
        
         @media (max-width: 400px) {
            .id-card { padding: 20px; }
            .id-card-title { font-size: 1.3rem; }
            .social-links { gap: 12px; }
            .social-link { padding: 8px 12px; gap: 10px; }
            .social-icon { width: 24px; height: 24px; }
            .social-username { font-size: 0.95rem; }
        }

        @media (min-width: 1200px) {
            .container { width: 85%; max-width: 1300px; }
             #skills.section { padding-top: 180px; }
            .hero-title { font-size: 5.5rem; }
            .skill-1 { left: 25%; top: 15%; } .skill-2 { left: 65%; top: 35%; } .skill-3 { left: 30%; top: 60%; } .programming-card { left: 70%; top: 80%; }
            .letter-box { width: 100px; height: 100px; font-size: 4rem; gap: 20px; }
            .id-card { max-width: 650px; }
        }
        footer { text-align: center; padding: 25px 15px; background-color: #000; position: relative; z-index: 10; border-top: 1px solid rgba(255, 255, 255, 0.1); }
        .footer-text { font-size: 0.85rem; opacity: 0.6; }
        
        .scroll-line { position: absolute; width: 1px; height: 0; background: linear-gradient(to bottom, transparent, rgba(var(--accent-color-rgb), 0.5), transparent); top: 0; opacity: 0.3; z-index: 1; pointer-events: none; }
    </style>
<!-- Libraries -->
<script defer="" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.waves.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
</head>
<body>
<!-- Page Wrapper for potential structural needs -->
<div class="page-wrapper">
<!-- Loader -->
<div class="loader"> <div class="loader-content"> <div class="loader-spinner"></div> <p>در حال بارگذاری...</p> </div> </div>

<!-- Navbar and Side Menu HTML REMOVED -->

<!-- Main Content Area (Sections wrapped) -->
<main class="content-container">
<!-- Hero Section -->
<section class="section" id="hero">
<div class="hero-bg"></div> <!-- Vanta target -->
<div class="floating-shapes"></div>
<div class="container"> <div class="hero-content"> <h1 class="hero-title">مهارت و علایق من</h1> <p class="hero-subtitle">طراح و توسعه‌دهنده وب | علاقه‌مند به هوشمندسازی</p> </div> </div>
</section>
<!-- About Section -->
<section class="section" id="about">
<div class="container">
<div class="about-grid">
<div class="about-text">
<h2 class="about-title">درباره من</h2>
<p>من مصطفی بهنام‌فر، با بیش از ۵ سال تجربه در طراحی و توسعه وب، متخصص در ایجاد تجربه‌های کاربری جذاب و تعاملی هستم. به کدنویسی تمیز و اصولی باور دارم و همواره در جستجوی یادگیری و به‌کارگیری فناوری‌های نوین هستم.</p>
<br/>
<p>در نگاه من، هر پروژه داستانی منحصربه‌فرد است که باید به بهترین شکل روایت شود. ترکیب خلاقیت و فناوری را ابزاری قدرتمند می‌دانم که نه‌تنها به خلق طراحی‌های زیبا، بلکه به ارائه راه‌حل‌های کاربردی و نوآورانه منجر می‌شود.</p>
</div>
<div class="about-image-container">
<div class="about-image">
<div class="about-image-inner"></div>
</div>
</div>
</div>
</div>
</section>
<!-- Skills Section -->
<section class="section" id="skills">
<div class="skills-container">
<h2 class="skills-title">مهارت‌های من</h2>
<div class="horizontal-scroll-container">
<div class="horizontal-scroll">
<!-- Skill Cards (Add loading="lazy" to images) -->
<div class="skill-card"> <img alt="Python" class="skill-image" loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Python-logo-notext.svg"/> <div class="skill-content"> <h3 class="skill-title">Python</h3> <p>توسعه ابزار و بات‌های قدرتمند درهوشمندسازی.</p> <div class="skill-bar"> <div class="skill-progress" data-width="80"></div> </div> </div> </div>
<div class="skill-card"> <img alt="HTML5" class="skill-image" loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/6/61/HTML5_logo_and_wordmark.svg"/> <div class="skill-content"> <h3 class="skill-title">HTML5</h3> <p>ساختار مدرن و معنایی وب.</p> <div class="skill-bar"> <div class="skill-progress" data-width="95"></div> </div> </div> </div>
<div class="skill-card"> <img alt="CSS3" class="skill-image" loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/d/d5/CSS3_logo_and_wordmark.svg"/> <div class="skill-content"> <h3 class="skill-title">CSS3</h3> <p>طراحی واکنش‌گرا و انیمیشن.</p> <div class="skill-bar"> <div class="skill-progress" data-width="90"></div> </div> </div> </div>
<div class="skill-card"> <img alt="JavaScript" class="skill-image" loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/6/6a/JavaScript-logo.png"/> <div class="skill-content"> <h3 class="skill-title">JavaScript</h3> <p>تعاملات پویا و منطق فرانت‌اند.</p> <div class="skill-bar"> <div class="skill-progress" data-width="85"></div> </div> </div> </div>
<div class="skill-card"> <img alt="React" class="skill-image" loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg"/> <div class="skill-content"> <h3 class="skill-title">React</h3> <p>ساخت رابط‌های کاربری کامپوننت‌محور.</p> <div class="skill-bar"> <div class="skill-progress" data-width="70"></div> </div> </div> </div>
<div class="skill-card"> <img alt="Photoshop" class="skill-image" loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/Adobe_Photoshop_CC_icon.svg/640px-Adobe_Photoshop_CC_icon.svg.png"/> <div class="skill-content"> <h3 class="skill-title">Adobe Photoshop</h3> <p>ساخت و طراحی گرافیکی مدرن</p> <div class="skill-bar"> <div class="skill-progress" data-width="95"></div> </div> </div> </div>
<div class="skill-card"> <img alt="Illustrator" class="skill-image" loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fb/Adobe_Illustrator_CC_icon.svg/640px-Adobe_Illustrator_CC_icon.svg.png"/> <div class="skill-content"> <h3 class="skill-title">Adobe Illustrator</h3> <p>تعامل و ساخت عناصر باکیفیت</p> <div class="skill-bar"> <div class="skill-progress" data-width="90"></div> </div> </div> </div>
<div class="skill-card"> <img alt="Premiere" class="skill-image" loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/40/Adobe_Premiere_Pro_CC_icon.svg/640px-Adobe_Premiere_Pro_CC_icon.svg.png"/> <div class="skill-content"> <h3 class="skill-title">Adobe Premiere</h3> <p>کار و ساخت ویرایش ‌های ویدویی </p> <div class="skill-bar"> <div class="skill-progress" data-width="90"></div> </div> </div> </div>
</div>
</div>
</div>
</section>
<!-- Skills Parallax Section -->
<section class="skills-parallax section" id="skills-parallax">
<div class="parallax-content-wrapper">
<div class="skill-item skill-1"> <img alt="فرانت‌اند" class="skill-image" loading="lazy" src="https://api.iconify.design/mdi:code-braces.svg?color=%23ffbf00"/> <div class="skill-item-content"> <h3>توسعه و طراحی  وب‌سایت </h3> <p>رابط‌های کاربری مدرن برای کاربری‌های مختلف مثل سایت‌های تجاری، اطلاع رسانی و فروشگاه.</p> </div> </div>
<div class="skill-item skill-2"> <img alt="طراحی UI/UX" class="skill-image" loading="lazy" src="https://api.iconify.design/mdi:palette-swatch-outline.svg?color=%23ffbf00"/> <div class="skill-item-content skill-2"> <h3>طراحی گرافیکی-ویدیویی</h3> <p>تجربه‌های کاربری شهودی با Figma و Adobe.</p> </div> </div>
<div class="skill-item skill-3"> <img alt="بک‌اند" class="skill-image" loading="lazy" src="https://api.iconify.design/mdi:server-network.svg?color=%23ffbf00"/> <div class="skill-item-content"> <h3>توسعه پایتون</h3> <p>دیتا آنالیز و ساخت بات‌ها و فعالیت هوشمندسازی</p> </div> </div>
<div class="programming-card"> <h3>فراتر از وب</h3> <p>کاوش در هوش‌مصنوعی، توسعه و آموزش فناوری دیجیتال.</p> </div>
</div>
</section>

<!-- AI Game Section -->
<section class="section" id="ai-game-section">
    <div class="container">
        <h2 id="ai-game-title"></h2>
        <!-- This wrapper will be hidden initially and shown after camera permission -->
        <div class="ai-game-wrapper" id="aiGameWrapper" style="display: none;">
            <div class="ai-game-main">
                <div class="camera-container">
                    <video id="videoElement" autoplay muted playsinline></video>
                    <canvas id="canvasElement"></canvas>
                    <div class="detection-overlay" id="detectionInfo">درحال آماده‌سازی مدل...</div>
                    <div class="computer-player" id="computerPlayer">
                        <div class="computer-label">🤖 کامپیوتر</div>
                        <div class="computer-move" id="computerMove">❓</div>
                        <div class="computer-text" id="computerText">منتظر...</div>
                    </div>
                    <div class="countdown-overlay" id="countdown"></div>
                </div>
                <div class="ai-game-controls">
                    <button class="ai-game-btn btn-start" id="startBtn">🎯 شروع بازی (3 دور)</button>
                    <button class="ai-game-btn btn-reset" id="resetBtn">🔄 شروع مجدد</button>
                </div>
            </div>
            <div class="ai-game-sidebar">
                <div class="ai-game-card" id="score-board">
                    <h3 class="title">📊 امتیازهای کل</h3>
                    <div class="score-grid">
                        <div class="score-item">
                            <div class="score-label">🏆 برد</div>
                            <div class="score-value" id="wins">0</div>
                        </div>
                        <div class="score-item">
                            <div class="score-label">💔 باخت</div>
                            <div class="score-value" id="losses">0</div>
                        </div>
                        <div class="score-item">
                            <div class="score-label">🤝 مساوی</div>
                            <div class="score-value" id="ties">0</div>
                        </div>
                    </div>
                </div>
                <div class="ai-game-card" id="result-section">
                    <h3 class="title">🎯 نتیجه بازی</h3>
                    <div id="result-content">
                        <div class="result-text">برای شروع، دکمه شروع بازی را فشار دهید</div>
                    </div>
                    <div id="statusText">دوربین را آماده کنید...</div>
                </div>
            </div>
        </div>
        <!-- This button will be shown initially to ask for permission -->
        <button class="ai-game-btn btn-start" id="initGameBtn" style="margin: 0 auto; display: block;">
            برای شروع بازی سنگ کاغذ قیچی تصویری لطفا اجازه دوربین بدهید
        </button>
    </div>
</section>


<!-- Word Game Section -->
<section class="section" id="games-section">
<div class="game-container">
<h2 class="game-title">یک کلمه، یک دنیا علاقه: با هم کشف کنیم؟!</h2>
<div class="letter-boxes">
<div class="letter-box" data-index="0"></div> <div class="letter-box" data-index="1"></div> <div class="letter-box" data-index="2"></div> <div class="letter-box" data-index="3"></div>
</div>
<div class="game-message">برای شروع، حروف را با کیبورد فارسی تایپ کنید...</div>
<div class="win-message">تبریک! کلمه "بازی" بود. این یکی از بزرگترین علایق منه!</div>
<div class="used-letters"></div>
<div class="virtual-keyboard" id="gameKeyboard"></div>
<div class="hint-button"> ? <div class="hint-tooltip"> <strong>راهنمایی:</strong> <p style="margin: 0;">فریدریش نیچه: «در مرد واقعی، کودکی پنهان است که می‌خواهد .... کند.»</p> </div> </div>
<div class="call-section">
<div class="call-block"> <img alt="بازی‌وار سازی" loading="lazy" src="https://api.iconify.design/mdi:controller-classic.svg?color=%23ffbf00"> <h3>بازی‌وار سازی (Gamification)</h3> <p>علاقه‌مند به تبدیل فرآیندها به تجربیات جذاب و انگیزشی.</p> </img></div>
<div class="call-block"> <img alt="تحقیق بازی" loading="lazy" src="https://api.iconify.design/mdi:lightbulb-on-outline.svg?color=%23ffbf00"> <h3>طراحی و تحقیق بازی</h3> <p>مطالعه مکانیک‌ها، روایت و روانشناسی پشت بازی‌های خوب.</p> </img></div>
<div class="call-block"> <img alt="همکاری" loading="lazy" src="https://api.iconify.design/mdi:handshake-outline.svg?color=%23ffbf00"> <h3>دعوت به همکاری</h3> <p>آماده همکاری در پروژه‌های خلاقانه، به‌خصوص با چاشنی بازی!</p> </img></div>
</div>
</div>
</section>

<!-- Experience Section - UPDATED -->
<section class="section" id="experience">
<div class="container">
<h2 class="projects-title">فعالیت‌ها و تجارب کاری</h2>
<div class="experience-network">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://github.com/Mo3Beh/resume/blob/main/park.png?raw=true"/></div>
        <p>فناور و برنامه نویس در زمینه هوشمند سازی در پارک علم و فناوری خراسان شمالی</p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://mo3beh.github.io/mimg/seg.jpeg"/></div>
        <p>برنامه نویس تمام وقت در شرکت فناوری سرویناگستر</p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://arad.land/img/Mainlogo.png"/></div>
        <p>طراح و توسعه دهنده وب سایت تیم آرادلند</p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://github.com/Mo3Beh/resume/blob/main/Farhangian_Uni.png?raw=true"/></div>
        <p>برنامه نویس واحد هوشمندسازی دانشگاه فرهنگیان خراسان شمالی</p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://github.com/Mo3Beh/resume/blob/main/University_of_Bojnord_logo.png?raw=true"/></div>
        <p>توسعه دهنده زیرساخت‌های دفترنمره مجازی در اداره آموزش پرورش خراسان شمالی</p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://avaa-beauty.com/wp-content/uploads/2023/07/cropped-cropped-ava-beauty-01.png"/></div>
        <p>طراح و توسعه دهنده وب سایت کلینیک آوا</p>
    </div>
</div>
</div>

<!-- Academic Background -->
<div class="experience-group">
<h3>زمینه دانشگاهی</h3>
<div class="experience-items">
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://github.com/Mo3Beh/resume/blob/main/University_of_Bojnord_logo.png?raw=true"/></div>
        <p>پژوهشگر و فعال در زمینه دیتا ساینس و آنالیز عددی<br><small class="highlight-yellow">(دانشکده مهندسی دانشگاه بجنورد)</small></p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://github.com/Mo3Beh/resume/blob/main/jahad.png?raw=true"/></div>
        <p>عضو هسته اصلی دانشجویان جهاد فناور خراسان شمالی<br><small class="highlight-yellow">(جهاد دانشگاهی)</small></p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://github.com/Mo3Beh/resume/blob/main/FUM_Logo.png?raw=true"/></div>
        <p>عضو رسمی انجمن علمی هوش مصنوعی و بازی<br><small class="highlight-yellow">(دانشگاه فردوسی مشهد)</small></p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://github.com/Mo3Beh/resume/blob/main/Farhangian_Uni.png?raw=true"/></div>
        <p>موسس و هم بنیان گذار انجمن علمی آموزش ابتدایی<br><small class="highlight-yellow">(در دانشگاه فرهنگیان امام محمد باقر(ع))</small></p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://github.com/Mo3Beh/resume/blob/main/FUM_Logo.png?raw=true"/></div>
        <p>بنیان گذار و هسته اصلی پادکست مهندسی ولکانو<br><small class="highlight-yellow">(دانشگاه فردوسی مشهد)</small></p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://github.com/Mo3Beh/resume/blob/main/University_of_Bojnord_logo.png?raw=true"/></div>
        <p>محقق و مشاهده‌گر واحد روانشناسی و بازی‌وار سازی<br><small class="highlight-yellow">(دانشگاه بجنورد)</small></p>
    </div>
</div>
</div>

<!-- Teaching Background -->
<div class="experience-group">
<h3>زمینه تدریس</h3>
<div class="experience-items">
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://github.com/Mo3Beh/resume/blob/main/ap.png?raw=true"/></div>
        <p>معلم رسمی آموزش و پرورش</p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="."https://github.com/Mo3Beh/resume/blob/main/ap.png?raw=true"/></div>
        <p>مدرس دوره‌های سواد دیجتیال و هوش مصنوعی<br><small class="highlight-yellow">(در آموزش و پرورش)</small></p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://github.com/Mo3Beh/resume/blob/main/ap.png?raw=true"/></div>
        <p>مدرس دوره های توانمند سازی مربیان و معلمان<br><small class="highlight-yellow">(در آموزش و پرورش)</small></p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://github.com/Mo3Beh/resume/blob/main/pajoheshsara.png?raw=true"/></div>
        <p>مدرس دوره‌های برنامه نویسی پایتون،هوش مصنوعی و الگوریتم<br><small class="highlight-yellow">(پژوهش سرای معلم)</small></p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://upload.wikimedia.org/wikipedia/fa/c/c2/Kanoon_logo.svg"/></div>
        <p>مدرس دوره هوش مصنوعی و سواد دیجیتال<br><small class="highlight-yellow">(کانون پرورشی  و فکری )</small></p>
    </div>
    <div class="exp-item">
        <div class="exp-icon-wrapper"><img alt="Logo" class="exp-logo" src="https://github.com/Mo3Beh/resume/blob/main/c&z.png?raw=true""></div>
        <p>مدرس دوره سلامت دیجیتال و پایش فناورانه<br><small class="highlight-yellow">(موسسه چیروک و زانا)</small></p>
    </div>
</div>
</div>

</div>
</div>
</section> 

<!-- Projects Section -->
<section class="section" id="projects"> <div class="container"> <h2 class="projects-title">دیگر علایق من</h2> <div class="projects-grid">
<div class="project-card"> <div class="project-image" loading="lazy" style="background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Falcon_Heavy_Side_Boosters_landing_on_LZ1_and_LZ2_-_2018_%2825254688767%29.jpg/1200px-Falcon_Heavy_Side_Boosters_landing_on_LZ1_and_LZ2_-_2018_%2825254688767%29.jpg?20180207112824')"></div> <div class="project-content"> <h3 class="project-title">علم!</h3> <p>من علاقه شدیدی به پیگیری و دنبال کردن مطالب علمی دارم.</p> </div> </div>
<div class="project-card"> <div class="project-image" loading="lazy" style="background-image: url('https://upload.wikimedia.org/wikipedia/commons/f/f0/Bojnourd_nature.png?20250329105053')"></div> <div class="project-content"> <h3 class="project-title">طبیعت‌گردی</h3> <p>چه چیزی لذت بخش‌تر از گشت و گذار توی طبیعت؟</p> </div> </div>
<div class="project-card"> <div class="project-image" loading="lazy" style="background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/13-11-02-olb-by-RalfR-03.jpg/1200px-13-11-02-olb-by-RalfR-03.jpg?20131106111623')"></div> <div class="project-content"> <h3 class="project-title">ادبیات و کتاب‌خوانی</h3> <p>
                  شما با یک BookWorm طرف هستید. اشتیاق من به مطالعه کتاب در زمینه‌های مختلف به بی‌نهایت میل می‌کنه.
                </p> </div> </div>
<div class="project-card"> <div class="project-image" loading="lazy" style="background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/c/c6/Man_riding_horse.jpg/1200px-Man_riding_horse.jpg?20230316054144')"></div> <div class="project-content"> <h3 class="project-title">ورزش متفاوت ؟</h3> <p>سوارکاری و بسکتبال از ورزش‌های مورد‌علاقه من‌اند که مدت زیادی رو صرف اون‌ها می‌کنم.</p> </div> </div>
<div class="project-card"> <div class="project-image" loading="lazy" style="background-image: url('https://kottke.org/cdn-cgi/image/format=auto,fit=scale-down,width=1200,metadata=none/plus/misc/images/feynman-blackboard.jpg')"></div> <div class="project-content"> <h3 class="project-title">تدریس کردن</h3> <p>یکی از علایق من توضیح دادن و تدریس چیزهای مختلفه. سطح انرژی به مثابه ریچارد فاینمن.</p> </div> </div>
<div class="project-card"> <div class="project-image" loading="lazy" style="background-image: url('https://cdn.honaronline.ir/thumbnail/YTU0YWU0MTli/t455U-vj7HoFiK2lSX4ww6IFYUG8sUEk5_3jCPI962hs4juRDGsPltgpIs3g4bUW/YTU0YWU0MTli.jpg')"></div> <div class="project-content"> <h3 class="project-title">هنر!</h3> <p>هنرهای مختلفی رو مثل موسیقی، گرافیک،طراحی اسلیمی و هنرهای شنیداری به طور جدی دنبال می‌کنم.</p> </div> </div>
</div> </div>
</section>
<!-- Contact Section -->
<section class="section" id="contact">
<div class="container">
<div class="contact-content">
<h2 class="contact-title">تماس با من</h2>
<div class="id-card">
<h3 class="id-card-title">راه‌های ارتباطی با من</h3>
<div class="social-links">
<a class="social-link telegram" href="https://t.me/Mo3Beh" rel="noopener noreferrer" target="_blank">
<img alt="Telegram" class="social-icon" src="https://api.iconify.design/mdi:telegram.svg?color=%23ffffff"/>
<span class="social-username">@Mo3Beh</span>
</a>
<a class="social-link linkedin" href="https://www.linkedin.com/in/Mo3Beh" rel="noopener noreferrer" target="_blank">
<img alt="LinkedIn" class="social-icon" src="https://api.iconify.design/mdi:linkedin.svg?color=%23ffffff"/>
<span class="social-username">@Mo3Beh</span>
</a>
<a class="social-link instagram" href="https://www.instagram.com/Mo3Beh" rel="noopener noreferrer" target="_blank">
<img alt="Instagram" class="social-icon" src="https://api.iconify.design/mdi:instagram.svg?color=%23ffffff"/>
<span class="social-username">@Mo3Beh</span>
</a>
<a class="social-link github" href="https://github.com/Mo3Beh" rel="noopener noreferrer" target="_blank">
<img alt="GitHub" class="social-icon" src="https://api.iconify.design/mdi:github.svg?color=%23ffffff"/>
<span class="social-username">@Mo3Beh</span>
</a>
<a class="social-link github" href="tel:09352318389" rel="noopener noreferrer" target="_blank">
<img alt="GitHub" class="social-icon" src="https://api.iconify.design/mdi:call.svg?color=%23ffffff"/>
<span class="social-username">0935-231-8389</span>
</a>
</div>
</div>
</div>
</div>
</section>
<footer> <p class="footer-text">ساخته شده با عشق فراوان به کد | © ۱۴۰۴</p> </footer>
</main> <!-- End content-container -->
</div> <!-- End page-wrapper -->
<!-- Main Script Block -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- Loader ---
        const loader = document.querySelector('.loader');
        setTimeout(() => { loader.classList.add('hidden'); }, 200);

        // --- GSAP & ScrollTrigger Init ---
        gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

        // --- Global Settings ---
        let isMobile = window.innerWidth <= 768;
        let vantaEffect = null;

        // --- Navbar JS Logic (REMOVED) ---

        function updateWindowWidthLogic() {
             const newIsMobile = window.innerWidth <= 768;
             if (newIsMobile !== isMobile) {
                 isMobile = newIsMobile;
                 if (gameInstance) gameInstance.recreateKeyboard();
             }
             ScrollTrigger.refresh(); // Refresh GSAP triggers on resize
        }
        
        // --- Vanta.js Waves Effect ---
        function initVanta() {
             if (vantaEffect) { vantaEffect.destroy(); vantaEffect = null; }
             const heroBg = document.querySelector("#hero .hero-bg");
             if (!heroBg) return;

              heroBg.style.backgroundColor = 'transparent';
              const heroSection = document.getElementById('hero');
              if (heroSection) heroSection.style.backgroundColor = '#1a1a2e';

              if (typeof VANTA !== 'undefined') {
                 try {
                     vantaEffect = VANTA.WAVES({
                        el: heroBg,
                        mouseControls: true, touchControls: false, gyroControls: false,
                        color: 0x111111, shininess: 25.00, waveHeight: 10.00, waveSpeed: 0.70, zoom: 0.90,
                        minHeight: 200.00, minWidth: 200.00, scale: 1.00, scaleMobile: 1.00
                     });
                     if (heroSection) heroSection.style.backgroundColor = 'transparent';
                 } catch (e) {
                     console.error("Vanta.js initialization failed:", e);
                 }
             }
         }


        // --- Helper Functions ---
        function createShapes() {
            const shapesContainer = document.querySelector('.floating-shapes'); if (!shapesContainer) return; shapesContainer.innerHTML = ''; const shapeCount = isMobile ? 6 : 12;
            for (let i = 0; i < shapeCount; i++) { const shape = document.createElement('div'); shape.classList.add('shape'); const size = Math.random() * (isMobile ? 35 : 60) + 15; const left = Math.random() * 100; const delay = Math.random() * 5; const duration = Math.random() * 10 + 12; shape.style.width = `${size}px`; shape.style.height = `${size}px`; shape.style.left = `${left}%`; shape.style.animationDuration = `${duration}s`; shape.style.animationDelay = `${delay}s`; shapesContainer.appendChild(shape); }
        }
        function createScrollLines() {
            document.querySelectorAll('.scroll-line').forEach(line => line.remove()); if (isMobile) return; if (document.querySelector('.scroll-line')) return; const body = document.querySelector('.page-wrapper') || document.body; const lineCount = 4;
            for (let i = 0; i < lineCount; i++) { const line = document.createElement('div'); line.classList.add('scroll-line'); const left = Math.random() * 100; line.style.left = `${left}%`; body.appendChild(line); gsap.to(line, { scrollTrigger: { trigger: body, start: 'top top', end: 'bottom bottom', scrub: 2 + Math.random() * 2 }, height: '100vh', ease: 'none' }); }
        }

        let scrollTriggers = [];
        function killScrollTriggers() {
            scrollTriggers.forEach(st => st.kill());
            scrollTriggers = [];
            ScrollTrigger.getAll().forEach(st => { if (!scrollTriggers.includes(st)) { st.kill(); } });
        }

        // --- Animations Setup ---
        function initScrollAnimations() {
            killScrollTriggers();

            // Hero animation
             const heroTl = gsap.timeline({
                  scrollTrigger: { trigger: '#hero', start: 'top 70%' }
             })
                .to('.hero-title', { opacity: 1, y: 0, duration: 1, delay: 0.1, ease: 'power2.out' })
                .to('.hero-subtitle', { opacity: 1, y: 0, duration: 1, ease: 'power2.out' }, "-=0.8");
             scrollTriggers.push(heroTl.scrollTrigger);

            // About Section
             const aboutTl = gsap.timeline({
                scrollTrigger: { trigger: '#about', start: 'top 80%' }
             })
             .to('.about-text', { opacity: 1, y: 0, x: 0, duration: 0.8, ease: 'power2.out' })
             .to('.about-image', { opacity: 1, y: 0, x: 0, duration: 0.8, ease: 'power2.out' }, "-=0.6");
             scrollTriggers.push(aboutTl.scrollTrigger);

             const aboutImgInnerSt = ScrollTrigger.create({
                trigger: '.about-image',
                start: 'top 75%',
                animation: gsap.from('.about-image-inner', {
                     scale: 1.2, rotation: isMobile ? 0 : -10, duration: 1.2, ease: 'power3.out'
                })
             });
             scrollTriggers.push(aboutImgInnerSt);

            // Section Titles Appear
            gsap.utils.toArray('.skills-title, .projects-title, .contact-title, .game-title').forEach(title => {
                 const st = ScrollTrigger.create({
                     trigger: title,
                     start: 'top 85%',
                     animation: gsap.to(title, { opacity: 1, y: 0, duration: 0.8, ease: 'power2.out' }),
                     toggleActions: "play none none none"
                 });
                 scrollTriggers.push(st);
             });
            
             // AI Game Title Typewriter Animation
            const aiTitle = document.getElementById('ai-game-title');
            if (aiTitle) {
                const aiTitleText = "یکی دیگه از علاقه های من هوش مصنوعیه";
                aiTitle.textContent = ''; // Clear it initially
                let typeTl = gsap.timeline({
                    scrollTrigger: {
                        trigger: aiTitle,
                        start: 'top 85%',
                        toggleActions: 'play none none none',
                        onEnter: () => {
                            let i = 0;
                            const type = () => {
                                if (i < aiTitleText.length) {
                                    aiTitle.textContent += aiTitleText.charAt(i);
                                    i++;
                                    setTimeout(type, 80);
                                }
                            };
                            type();
                        }
                    }
                });
                scrollTriggers.push(typeTl.scrollTrigger);
            }


            // Skill Cards Appear & Progress Bars
             gsap.utils.toArray('.skill-card').forEach((card, index) => {
                const progressBar = card.querySelector('.skill-progress');
                const width = progressBar ? progressBar.dataset.width : '0';
                const cardTl = gsap.timeline({
                    scrollTrigger: { trigger: card, start: 'top 90%', toggleActions: 'play none none none' }
                });
                cardTl.to(card, { opacity: 1, y: 0, duration: 0.6, ease: 'power1.out', delay: isMobile ? index * 0.08 : 0 });
                 if (progressBar) { cardTl.to(progressBar, { width: `${width}%`, duration: 1.2, ease: 'power2.inOut' }, "+=0.1"); }
                 scrollTriggers.push(cardTl.scrollTrigger);
             });

            // Parallax Section Items - ENTRY Animation
             gsap.utils.toArray('#skills-parallax .skill-item, #skills-parallax .programming-card').forEach((item, i) => {
                 const st = ScrollTrigger.create({
                    trigger: item, start: 'top 90%',
                    animation: gsap.to(item, { duration: 0.8, y: 0, opacity: 1, ease: 'power2.out', delay: i * 0.1 }),
                    toggleActions: 'play none none none'
                 });
                 scrollTriggers.push(st);
             });


            // Project Cards Appear (Batch)
             const projectBatchSt = ScrollTrigger.batch(".project-card", {
                interval: 0.1, batchMax: isMobile ? 2 : 4, start: "top 90%",
                onEnter: batch => gsap.to(batch, { opacity: 1, y: 0, duration: 0.6, ease: 'power1.out', stagger: 0.1 }),
             });
              if (Array.isArray(projectBatchSt)) scrollTriggers.push(...projectBatchSt);


            // Contact Section Elements (ID Card)
             const contactTl = gsap.timeline({
                 scrollTrigger: { trigger: '#contact', start: 'top 80%' }
             });
             contactTl.to('.id-card', {
                 opacity: 1,
                 y: 0,
                 duration: 0.8,
                 ease: 'power2.out'
             });
             scrollTriggers.push(contactTl.scrollTrigger);

        }

        // --- Horizontal Scroll for Skills Section ---
        function initSkillsHorizontalScroll() {
            const scrollContainer = document.querySelector('.horizontal-scroll');
            const scrollWrapper = document.querySelector('.horizontal-scroll-container');
            const skillsSection = document.querySelector('#skills');
            
            if (!scrollContainer || !scrollWrapper || !skillsSection) return;
            
            if (isMobile) {
                scrollWrapper.style.overflowX = 'auto';
                gsap.set(scrollContainer, { clearProps: 'all' });
                skillsSection.classList.remove('gsap-pin-active');
            } else {
                scrollWrapper.style.overflowX = 'hidden';
                
                const maxScroll = scrollContainer.scrollWidth - scrollWrapper.offsetWidth;
                const extraOffset = 1200;
                gsap.set(scrollContainer, { x: -maxScroll + 700 });
                
                const st = ScrollTrigger.create({
                    trigger: skillsSection,
                    start: 'top top',
                    end: () => "+=" + (maxScroll + extraOffset),
                    pin: true,
                    scrub: true,
                    invalidateOnRefresh: true,
                    onUpdate: (self) => {
                        const totalDistance = maxScroll + extraOffset;
                        const newX = -maxScroll + 700 + totalDistance * self.progress;
                        gsap.to(scrollContainer, {
                            duration: 0.4,
                            x: newX,
                            ease: "power3.out",
                            overwrite: "auto"
                        });
                    }
                });
                scrollTriggers.push(st);
            }
        }

         // --- Parallax Effects for #skills-parallax (Desktop Only) ---
         function initParallaxEffects() {
             if (isMobile) return;

             const parallaxSection = document.querySelector('#skills-parallax');
             if (!parallaxSection) return;

             scrollTriggers = scrollTriggers.filter(st => {
                 const isParallaxTrigger = st.vars.trigger === parallaxSection && st.vars.scrub;
                 if (isParallaxTrigger) {
                     st.kill();
                     return false;
                 }
                 return true;
             });

             gsap.utils.toArray('#skills-parallax .skill-item, #skills-parallax .programming-card').forEach((item) => {
                 let yPercentValue = (Math.random() * -15) - 10;
                 let xPercentValue = (Math.random() - 0.5) * 15;
                 let scrubValue = 1.5 + Math.random() * 1;
                 const st = ScrollTrigger.create({
                     trigger: parallaxSection,
                     start: "top bottom",
                     end: "bottom top",
                     scrub: scrubValue,
                     animation: gsap.to(item, { yPercent: yPercentValue, xPercent: xPercentValue, ease: "none" }),
                 });
                  scrollTriggers.push(st);
             });
         }

        // --- AI Game (Rock-Paper-Scissors) Logic ---
        function initAIGame() {
            // Check if MediaPipe classes are available
            if (typeof Hands === 'undefined' || typeof Camera === 'undefined' || typeof drawConnectors === 'undefined' || typeof drawLandmarks === 'undefined') {
                console.error("MediaPipe scripts not loaded yet.");
                const initBtn = document.getElementById('initGameBtn');
                if (initBtn) {
                    initBtn.textContent = 'خطا در بارگذاری ابزارهای بازی';
                    initBtn.disabled = true;
                }
                return;
            }

            // --- Game variables ---
            let wins = 0, losses = 0, ties = 0;
            let playerSessionScore = 0, computerSessionScore = 0, currentRound = 0;
            const roundsToPlay = 3;
            let gameInProgress = false, countdownActive = false;
            let currentPlayerMove = null;
            let hands, camera;

            // --- DOM elements ---
            const videoElement = document.getElementById('videoElement');
            const canvasElement = document.getElementById('canvasElement');
            const canvasCtx = canvasElement.getContext('2d');
            const detectionInfo = document.getElementById('detectionInfo');
            const countdown = document.getElementById('countdown');
            const statusText = document.getElementById('statusText');
            const resultContent = document.getElementById('result-content');
            const startBtn = document.getElementById('startBtn');
            const resetBtn = document.getElementById('resetBtn');
            const computerMoveEl = document.getElementById('computerMove');
            const computerText = document.getElementById('computerText');
            const gameWrapper = document.getElementById('aiGameWrapper');
            const initGameBtn = document.getElementById('initGameBtn');

            // --- Helper Functions ---
            const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));
            const resizeCanvas = () => {
                if (canvasElement && videoElement) {
                    canvasElement.width = videoElement.offsetWidth;
                    canvasElement.height = videoElement.offsetHeight;
                }
            };
            
            // --- MediaPipe and Camera Initialization ---
            async function requestCameraAndStart() {
                initGameBtn.disabled = true;
                initGameBtn.textContent = 'در حال آماده‌سازی دوربین...';
                try {
                    initializeHands();
                    await initializeCamera();
                    initGameBtn.style.display = 'none';
                    gameWrapper.style.display = 'flex';
                    if (window.innerWidth <= 1024) { gameWrapper.style.flexDirection = 'column'; }
                } catch (error) {
                    console.error('خطا در راه‌اندازی دوربین:', error);
                    initGameBtn.textContent = 'خطا در دسترسی به دوربین. لطفاً مجوز را بدهید و صفحه را رفرش کنید.';
                    initGameBtn.disabled = false;
                }
            }
            
            function initializeHands() {
                hands = new Hands({ locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}` });
                hands.setOptions({ maxNumHands: 1, modelComplexity: 1, minDetectionConfidence: 0.7, minTrackingConfidence: 0.7 });
                hands.onResults(onResults);
            }

            async function initializeCamera() {
                camera = new Camera(videoElement, {
                    onFrame: async () => { if (hands) await hands.send({ image: videoElement }); },
                    width: 640, height: 480
                });
                
                // MODIFIED: Add event listener to fix canvas sizing issue
                videoElement.addEventListener('loadeddata', () => {
                    resizeCanvas();
                });

                await camera.start();
                statusText.textContent = 'دوربین آماده است - برای شروع بازی دکمه شروع را فشار دهید';
                resizeCanvas(); // Initial call
            }

            function onResults(results) {
                if (!canvasCtx || !canvasElement) return;
                canvasCtx.save();
                canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);
                if (results.multiHandLandmarks && results.multiHandLandmarks.length > 0) {
                    for (const landmarks of results.multiHandLandmarks) {
                        drawConnectors(canvasCtx, landmarks, HAND_CONNECTIONS, { color: 'rgba(255,255,255,0.7)', lineWidth: 3 });
                        drawLandmarks(canvasCtx, landmarks, { color: 'var(--accent-color)', radius: 5 });
                        const gesture = detectGesture(landmarks);
                        const gestureInfo = getGestureInfo(gesture);
                        detectionInfo.textContent = `تشخیص: ${gestureInfo.name}`;
                        if (!countdownActive) { currentPlayerMove = gestureInfo.key; }
                    }
                } else {
                    detectionInfo.textContent = 'دست خود را جلوی دوربین نشان دهید';
                    currentPlayerMove = null;
                }
                canvasCtx.restore();
            }
            
            // --- Game Logic ---
            function detectGesture(landmarks) {
                const thumbTip = landmarks[4], indexTip = landmarks[8], middleTip = landmarks[12];
                const indexPip = landmarks[6], middlePip = landmarks[10];
                const indexExtended = indexTip.y < indexPip.y, middleExtended = middleTip.y < middlePip.y;
                const extendedCount = [indexExtended, middleExtended, landmarks[16].y < landmarks[14].y, landmarks[20].y < landmarks[18].y].filter(Boolean).length;
                if (extendedCount === 0) return 'rock';
                if (indexExtended && middleExtended && extendedCount === 2) return 'scissors';
                if (extendedCount >= 4) return 'paper';
                return 'unknown';
            }

            function getGestureInfo(gesture) {
                const gestures = {
                    'rock': { name: 'سنگ 🗿', emoji: '🗿', key: 'rock' },
                    'paper': { name: 'کاغذ 📄', emoji: '📄', key: 'paper' },
                    'scissors': { name: 'قیچی ✂️', emoji: '✂️', key: 'scissors' },
                    'unknown': { name: 'نامشخص ❓', emoji: '❓', key: 'unknown' }
                };
                return gestures[gesture] || gestures['unknown'];
            }
            
            function determineWinner(player, computer) {
                if (player === computer) return 'tie';
                if ((player === 'rock' && computer === 'scissors') || (player === 'paper' && computer === 'rock') || (player === 'scissors' && computer === 'paper')) return 'player';
                return 'computer';
            }
            
            async function startMatch() {
                if (gameInProgress) return;
                gameInProgress = true;
                startBtn.disabled = true;
                resetBtn.disabled = true;
                playerSessionScore = 0;
                computerSessionScore = 0;
                
                for (currentRound = 1; currentRound <= roundsToPlay; currentRound++) {
                    statusText.innerHTML = `آماده برای <br><strong>دور ${currentRound} از ${roundsToPlay}</strong>`;
                    resultContent.innerHTML = `<div class="result-text">دست خود را آماده کنید...</div>`;
                    await sleep(2000);
                    const roundWinner = await playSingleRound();
                    if (roundWinner === 'player') playerSessionScore++;
                    else if (roundWinner === 'computer') computerSessionScore++;
                    statusText.innerHTML = `نتیجه این دور: ${getRoundWinnerText(roundWinner)} <br> <strong>امتیاز: شما ${playerSessionScore} - ${computerSessionScore} کامپیوتر</strong>`;
                    await sleep(2500);
                }
                
                showFinalResult();
            }

            async function playSingleRound() {
                countdownActive = true;
                computerMoveEl.textContent = '❓';
                computerText.textContent = 'آماده می‌شود...';
                
                for (let i = 3; i > 0; i--) {
                    countdown.textContent = i;
                    await sleep(1000);
                }
                
                countdown.textContent = '📸';
                const capturedMove = currentPlayerMove;
                await sleep(300);
                countdown.textContent = '';
                
                const computerGesture = ['rock', 'paper', 'scissors'][Math.floor(Math.random() * 3)];
                const winner = determineWinner(capturedMove, computerGesture);
                
                if (winner === 'player') wins++;
                else if (winner === 'computer') losses++;
                else ties++;
                updateTotalScore();
                
                showRoundResult(capturedMove, computerGesture, winner);
                countdownActive = false;
                return winner;
            }

            function showRoundResult(playerMove, computerMove, winner) {
                const playerInfo = getGestureInfo(playerMove || 'unknown');
                const computerInfo = getGestureInfo(computerMove);
                const resultText = getRoundWinnerText(winner);
                const resultClass = winner === 'player' ? 'win' : winner === 'computer' ? 'loss' : 'tie';

                computerMoveEl.textContent = computerInfo.emoji;
                computerText.textContent = computerInfo.name.split(' ')[0];
                
                resultContent.innerHTML = `<div class="result-text ${resultClass}">${resultText}</div><div class="battle-display"><div class="player-display"><div class="player-label">شما</div><div class="player-move">${playerInfo.emoji}</div></div><div class="vs-text">VS</div><div class="player-display"><div class="player-label">کامپیوتر</div><div class="player-move">${computerInfo.emoji}</div></div></div>`;
            }
            
            function getRoundWinnerText(winner) {
                 if (winner === 'player') return '🎉 شما این دور را بردید!';
                 if (winner === 'computer') return '😔 کامپیوتر این دور را برد!';
                 if (winner === 'tie') return '🤝 این دور مساوی شد!';
                 return 'حرکت شما تشخیص داده نشد!';
            }

            function showFinalResult() {
                let finalMessage = '';
                let finalClass = 'tie';
                
                if (playerSessionScore > computerSessionScore) {
                    finalMessage = '🏆 شما برنده این مسابقه شدید!';
                    finalClass = 'win';
                } else if (computerSessionScore > playerSessionScore) {
                    finalMessage = '💻 کامپیوتر برنده این مسابقه شد!';
                    finalClass = 'loss';
                } else {
                    finalMessage = '😐 مسابقه با نتیجه مساوی تمام شد!';
                }
                
                resultContent.innerHTML = `<div class="result-text ${finalClass}" style="font-size: 1.5rem;">${finalMessage}</div>`;
                statusText.innerHTML = `<strong>امتیاز نهایی: شما ${playerSessionScore} - ${computerSessionScore} کامپیوتر</strong><br> برای بازی مجدد، دکمه شروع را بزنید.`;
                gameInProgress = false;
                startBtn.disabled = false;
                resetBtn.disabled = false;
            }

            function updateTotalScore() {
                document.getElementById('wins').textContent = wins;
                document.getElementById('losses').textContent = losses;
                document.getElementById('ties').textContent = ties;
            }

            function resetGame() {
                wins = 0; losses = 0; ties = 0;
                playerSessionScore = 0; computerSessionScore = 0; currentRound = 0;
                updateTotalScore();
                
                computerMoveEl.textContent = '❓';
                computerText.textContent = 'منتظر...';
                resultContent.innerHTML = '<div class="result-text">برای شروع بازی دکمه شروع را فشار دهید</div>';
                statusText.textContent = 'امتیازها بازنشانی شد - آماده برای شروع';
                countdown.textContent = '';
                gameInProgress = false;
                countdownActive = false;
                startBtn.disabled = false;
                resetBtn.disabled = false;
            }

            // --- Event Listeners ---
            initGameBtn.addEventListener('click', requestCameraAndStart);
            startBtn.addEventListener('click', startMatch);
            resetBtn.addEventListener('click', resetGame);
            window.addEventListener('resize', resizeCanvas);
        }

        // --- Word Game Logic with Virtual Keyboard ---
        function initGame() {
             const letterBoxes = document.querySelectorAll('.letter-box');
             const gameMessage = document.querySelector('.game-message');
             const usedLettersContainer = document.querySelector('.used-letters');
             const winMessage = document.querySelector('.win-message');
             const callSection = document.querySelector('.call-section');
             const keyboardContainer = document.getElementById('gameKeyboard');

             if (!letterBoxes.length || !gameMessage || !usedLettersContainer || !winMessage || !callSection || !keyboardContainer) {
                 return { cleanup: () => {}, recreateKeyboard: () => {}, reset: () => {} };
             }

             const correctWord = 'بازی';
             let guessedWord = Array(correctWord.length).fill('');
             let correctLettersFound = 0;
             let guessedLetters = new Set();
             let gameWon = false;
             const keyboardLayout = [
                ['ض', 'ص', 'ث', 'ق', 'ف', 'غ', 'ع', 'ه', 'خ', 'ح', 'ج'],
                ['چ', 'ش', 'س', 'ی', 'ب', 'ل', 'ا', 'ت', 'ن', 'م', 'ک', 'گ'],
                [ 'ظ', 'ط', 'ز', 'ر', 'ذ', 'د', 'پ', 'و', '؟']
             ];

             function resetGame() {
                  guessedWord = Array(correctWord.length).fill(''); correctLettersFound = 0; guessedLetters.clear(); gameWon = false;
                  letterBoxes.forEach(box => { box.textContent = ''; box.classList.remove('correct'); });
                  usedLettersContainer.innerHTML = '';
                  gameMessage.textContent = isMobile ? 'حروف را از کیبورد پایین انتخاب کنید...' : 'حروف را با کیبورد فارسی تایپ کنید...';
                  winMessage.style.display = 'none'; callSection.classList.remove('active');
                  keyboardContainer.querySelectorAll('.key').forEach(key => key.disabled = false);
             }

             function handleGuess(letter) {
                 if (gameWon || !letter) return; const normalizedLetter = letter.replace(/ي/g, 'ی').replace(/ك/g, 'ک'); if (guessedLetters.has(normalizedLetter)) return;
                 if (!/^[\u0600-\u06FF؟]$/.test(normalizedLetter)) { if (letter.match(/[a-zA-Z]/)) gameMessage.textContent = 'لطفاً از کیبورد فارسی استفاده کنید.'; return; }
                 guessedLetters.add(normalizedLetter); let found = false;
                 correctWord.split('').forEach((correctLetter, i) => { if (correctLetter === normalizedLetter && guessedWord[i] === '') { guessedWord[i] = normalizedLetter; const box = letterBoxes[i]; box.textContent = normalizedLetter; box.classList.add('correct'); correctLettersFound++; found = true; } });
                 if (found) { if (correctLettersFound === correctWord.length) { gameMessage.textContent = ''; winMessage.style.display = 'block'; gameWon = true; gsap.fromTo(winMessage, {opacity: 0, y: 10}, {opacity: 1, y: 0, duration: 0.5, delay: 0.2}); setTimeout(() => { callSection.classList.add('active'); }, 700); } else { gameMessage.textContent = 'عالی! حرف درستی بود.'; } } else { const usedLetterElem = document.createElement('div'); usedLetterElem.className = 'used-letter'; usedLetterElem.textContent = normalizedLetter; usedLettersContainer.appendChild(usedLetterElem); gsap.fromTo(usedLetterElem, {opacity: 0, scale: 0.5}, {opacity: 1, scale: 1, duration: 0.3}); gameMessage.textContent = `حرف "${normalizedLetter}" در کلمه نیست.`; }
                  const keyButton = keyboardContainer.querySelector(`.key[data-key="${normalizedLetter}"]`); if (keyButton) keyButton.disabled = true;
             }

             function createKeyboard() {
                keyboardContainer.innerHTML = '';
                if (!isMobile) { keyboardContainer.style.display = 'none'; return; }
                 keyboardContainer.style.display = 'flex';
                keyboardLayout.forEach(rowLetters => { const rowDiv = document.createElement('div'); rowDiv.className = 'keyboard-row'; rowLetters.forEach(letter => { const keyButton = document.createElement('button'); keyButton.className = 'key'; keyButton.textContent = letter; keyButton.dataset.key = letter; rowDiv.appendChild(keyButton); }); keyboardContainer.appendChild(rowDiv); });
             }

             const keydownHandler = function(event) { handleGuess(event.key); };
             document.addEventListener('keydown', keydownHandler);
             const keyboardClickHandler = function(event) { if (event.target.classList.contains('key') && !event.target.disabled) { handleGuess(event.target.dataset.key); } };
             keyboardContainer.addEventListener('click', keyboardClickHandler);

             createKeyboard(); resetGame();
             return { cleanup: () => { document.removeEventListener('keydown', keydownHandler); keyboardContainer.removeEventListener('click', keyboardClickHandler); }, recreateKeyboard: createKeyboard, reset: resetGame };
        }


        // --- Resize Handling ---
        function debounce(func, wait) {
            var timeout; return function() { var context = this, args = arguments; var later = function() { timeout = null; func.apply(context, args); }; clearTimeout(timeout); timeout = setTimeout(later, wait); };
        };

         let gameInstance = null;
         const handleResize = debounce(() => {
             updateWindowWidthLogic();
             initVanta();
             createShapes();
             createScrollLines();
             killScrollTriggers();
             ScrollTrigger.refresh(true);
             initScrollAnimations();
             initSkillsHorizontalScroll();
             initParallaxEffects();
         }, 250);

         window.addEventListener('resize', handleResize);

        // --- Initial Function Calls ---
        updateWindowWidthLogic();
        initVanta();
        createShapes();
        createScrollLines();
        initScrollAnimations();
        initSkillsHorizontalScroll();
        initParallaxEffects();
        gameInstance = initGame();
        initAIGame(); // Initialize the new AI game

        // --- Cleanup on page unload ---
         window.addEventListener('beforeunload', () => {
             if (gameInstance) gameInstance.cleanup();
             killScrollTriggers();
             window.removeEventListener('resize', handleResize);
             if (vantaEffect) vantaEffect.destroy();
         });

    }); // End DOMContentLoaded
</script>
</body>
</html>
